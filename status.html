<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>查詢我的預約 - 公務車系統</title>
    <script src="./js/version.js"></script><script src="./js/loader.js"></script>
    <script>loadCSS('./css/style.css');</script>
    <style>
        .reservation-card{background-color:#f8f9fa;border:1px solid #dee2e6;border-left:5px solid var(--primary-color);border-radius:5px;padding:15px;margin-bottom:15px}.reservation-card h3{margin-top:0;color:#333}.reservation-card p{margin:5px 0;color:#555}.cancel-btn{background-color:var(--error-color);margin-top:10px}.cancel-btn:hover{background-color:#c9302c}.status-badge{display:inline-block;padding:3px 8px;font-size:.8em;font-weight:700;color:#fff;background-color:#6c757d;border-radius:10px;vertical-align:middle}
        /* 確保 textarea 樣式正確 */
        #cancel-reason-input { width: 100%; height: 60px; padding: 5px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
    </style>
</head>
<body>
    <div id="loading-overlay"></div>
    <div class="container">
        <h1>我的有效預約</h1>
        <div id="reservation-list"></div>
        <div id="info-panel" style="display: none;"><p id="info-text"></p></div>
    </div>

    <!-- 【關鍵修正】補全 custom-confirm-modal 的內容 -->
    <div id="custom-confirm-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h4 id="confirm-title">取消預約</h4>
            <div class="form-group" style="text-align: left; margin: 20px 0;">
                <label for="cancel-reason-input">請輸入取消原因 (可留空)</label>
                <textarea id="cancel-reason-input"></textarea>
            </div>
            <p id="confirm-text" style="display: none;"></p>
            <div class="modal-buttons">
                <button id="confirm-ok-btn" class="ok-btn">確定取消</button>
                <button id="confirm-cancel-btn" class="cancel-btn">暫不取消</button>
            </div>
        </div>
    </div>

    <div id="custom-alert-modal" class="modal-overlay" style="display: none;"><div class="modal-content"><h4 id="alert-title">系統訊息</h4><p id="alert-text"></p><div class="modal-buttons"><button id="alert-ok-btn" class="ok-btn">關閉</button></div></div></div>

    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script>
        loadJS(['./js/main.js', './js/status.js'], () => { initializeStatusPage(); });
    </script>
</body>
</html>