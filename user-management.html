<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>使用者管理</title>
    <!-- 引入共用資源 -->
    <script src="./js/version.js"></script>
    <script src="./js/loader.js"></script>
    <script> loadCSS('./css/style.css'); </script>
    <!-- 頁面獨有 CSS -->
    <style>
        /* 篩選器與搜尋框的樣式 */
        .filter-controls,
        .search-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .filter-controls button {
            width: auto;
            flex-grow: 1;
            background-color: #6c757d;
        }

        .filter-controls button.active {
            background-color: var(--primary-color);
            font-weight: bold;
        }

        .search-controls input {
            flex-grow: 1;
        }

        /* 使用者列表項目的主容器樣式 */
        .user-list-item {
            display: flex;
            flex-wrap: wrap;
            /* 允許內容換行 */
            align-items: center;
            padding: 15px 10px;
            border-bottom: 1px solid #eee;
        }

        /* 左側：頭像 */
        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
        }

        /* 中間：使用者資訊 */
        .user-info {
            flex-grow: 1;
            /* 佔據剩餘空間，將右側內容推開 */
            line-height: 1.4;
        }

        .user-info strong {
            display: block;
            font-size: 1.1em;
        }

        .user-info span {
            font-size: 0.9em;
            color: #666;
        }

        /* 【核心】右側：操作按鈕的容器 */
        .user-actions {
            width: 100%;
            /* 佔滿整行，使其換行到下方 */
            margin-top: 10px;
            /* 與上方使用者資訊的間距 */
            display: flex;
            /* 啟用 Flexbox */
            justify-content: flex-end;
            /* 將內部按鈕靠右對齊 */
            gap: 10px;
            /* 設定按鈕之間的間距 */
        }

        /* 按鈕本身的樣式 */
        .user-actions button {
            width: auto;
            padding: 6px 16px;
            font-size: 0.9em;
            margin-left: 0;
            /* 覆蓋舊的 margin */
        }

        /* 按鈕顏色 */
        .user-actions .approve-btn {
            background-color: var(--success-color);
        }

        .user-actions .reject-btn,
        .user-actions .suspend-btn {
            background-color: var(--error-color);
        }

        .user-actions .edit-btn {
            background-color: #6c757d;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background-color: white;
            padding: 25px;
            border-radius: 8px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            text-align: center;
            color: #333;
        }

        .modal-content h4 {
            margin-top: 0;
            font-size: 1.2em;
        }

        .modal-content p {
            margin: 15px 0;
            font-size: 1em;
        }

        .modal-buttons {
            display: flex;
            justify-content: center;
            /* 按鈕置中 */
            gap: 15px;
            margin-top: 20px;
        }

        .modal-buttons button {
            width: 100px;
        }

        .modal-buttons .ok-btn {
            background-color: var(--primary-color);
        }

        .modal-buttons .cancel-btn {
            background-color: #6c757d;
        }
    </style>
</head>

<body>
    <div id="loading-overlay">載入中...</div>
    <div class="container">
        <h1>使用者管理</h1>
        <div id="auth-panel">正在驗證管理員權限...</div>

        <!-- 管理介面 (預設隱藏) -->
        <div id="management-panel" style="display: none;">
            <!-- 篩選器 -->
            <div id="filter-buttons" class="filter-controls">
                <button data-filter="pending" class="active">待審核</button>
                <button data-filter="approved">已通過</button>
                <button data-filter="suspended">已停權</button>
            </div>
            <!-- 搜尋框 -->
            <div class="search-controls">
                <input type="search" id="search-input" placeholder="依姓名或單位搜尋...">
                <button id="search-btn">搜尋</button>
            </div>
            <!-- 使用者列表 -->
            <div id="user-list"></div>
        </div>
    </div>
    <div id="custom-confirm-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h4 id="confirm-title">確認操作</h4>
            <p id="confirm-text">您確定要執行此操作嗎？</p>
            <div class="modal-buttons">
                <button id="confirm-ok-btn" class="ok-btn">確定</button>
                <button id="confirm-cancel-btn" class="cancel-btn">取消</button>
            </div>
        </div>
    </div>

    <!-- 【新增】自訂的訊息提示框 (取代 alert) -->
    <div id="custom-alert-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h4 id="alert-title">系統訊息</h4>
            <p id="alert-text"></p>
            <div class="modal-buttons">
                <button id="alert-ok-btn" class="ok-btn">關閉</button>
            </div>
        </div>
    </div>

    <!-- JS 載入 -->
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script>
        loadJS(
            ['./js/main.js', './js/user-management.js'],
            function () { initializeUserManagementPage(); }
        );
    </script>

</body>

</html>